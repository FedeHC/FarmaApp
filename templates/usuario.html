{% extends "base.html" %}
{% block title %}
	{{ super() }} Usuario {{ session["user"] }}
{% endblock title %}

{% block page_content %}
<div class="row">
	<div class="col-md-12 col-xs-12 caja">

		{# SI hubo errores durante la validación del CSV... #}

		{% if error: %}
		<h1 class="titulo">Hubo un problema:</h1>
		<h4><span class="label label-danger">{{ error }}</span>
		<br><br>
		<p>Mostrando mensajes de error*:</p>
		<br>
		<div class="table-responsive">
		<table class="table table-hover table-striped">
			<tr>
			<th>N° LINEA</th>
			<th>MENSAJE</th>
			<th>CAMPO</th>
			</tr>
			
			{% for linea in mensajes_error: %}
				<tr>
				{% for campo in linea: %}
					<td>{{ campo }}</td>
					{% endfor %}
				</tr>
			{% endfor %}
		</table>
		</div>
		<br>
		<p><i>* Todos estos mensajes se encuentran registrados en el log.</i></p>

		{# Si en cambio la validación del CSV fue correcta... #}

		{% else: %}
		<h1 class="titulo">¡Bienvenido {{ session["user"] }}!</h1>
		<p>Mostrando las últimas {{ cantidad }} ventas:</p>
		<br>
		<div class="table-responsive">
		<table class="table table-hover table-striped">
			{% for linea in resultados: %}

				{% if loop.index == 1: %}
					<tr>
					<th>#</th>
					{% for campo in linea: %}
						<th>{{ campo }}</th>
					{% endfor %}
					</tr>

				{% else: %}
					<tr>
					<th>{{ nro_filas + loop.index }}</th>
					{% for campo in linea: %}
						<td>{{ campo }}</td>
					{% endfor %}
					</tr>
				{% endif %}

			{% endfor %}
		</table>
		</div>
		{% endif %}

	</div>
</div>
{% endblock page_content %}

{# FIN #}